-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE public.customers_users
(
    customers_id serial,
    customers_login text,
    customers_email text,
    password_1 text,
    password_2 text,
    first_name text,
    middle_name text,
    last_name text,
    customers_phone integer,
    customers_country text,
    customers_city text,
    customers_adress text,
    PRIMARY KEY (customers_login)
);

CREATE TABLE public.material_type
(
    material_id serial,
    material_title text,
    PRIMARY KEY (material_title)
);

CREATE TABLE public.colors
(
    colors_id serial,
    colors_title text,
    PRIMARY KEY (colors_title)
);

CREATE TABLE public.category_item
(
    category_item_id serial,
    category_item_title text,
    PRIMARY KEY (category_item_title)
);

CREATE TABLE public.subcategory
(
    subcategory_id serial,
    subcategory_type text,
    subcategory_product text,
    PRIMARY KEY (subcategory_product)
);

CREATE TABLE public.payment_methods
(
    payment_methods_id serial,
    payment_methods__title text,
    PRIMARY KEY (payment_methods__title)
);

CREATE TABLE public.product
(
    product_id serial,
    product_category text,
    product_description text,
    product_select_material text,
    product_select_color text,
    product_size integer,
    extra_parameter_1 boolean,
    extra_parameter_2 boolean,
    extra_parameter_3 boolean,
    product_title text,
    PRIMARY KEY (product_title)
);

CREATE TABLE public."order"
(
    order_id serial,
    order_customer text,
    order_payment_type text,
    order_wallet_pay text,
    end_adress_delivery text,
    full_name_reciplent text,
    order_date time with time zone,
    order_buy_item text
);

CREATE TABLE public.order_product
(
    order_order_buy_item text,
    product_product_title text
);

CREATE TABLE public.customers_basket
(
    customers_basket_id serial,
    customers_basket_login text,
    customers_basket_items text,
    PRIMARY KEY (customers_basket_items)
);

CREATE TABLE public.customers_basket_product
(
    customers_basket_customers_basket_items text,
    product_product_title text
);

ALTER TABLE public.subcategory
    ADD FOREIGN KEY (subcategory_type)
    REFERENCES public.category_item (category_item_title)
    NOT VALID;


ALTER TABLE public.product
    ADD FOREIGN KEY (product_category)
    REFERENCES public.subcategory (subcategory_product)
    NOT VALID;


ALTER TABLE public.product
    ADD FOREIGN KEY (product_select_material)
    REFERENCES public.material_type (material_title)
    NOT VALID;


ALTER TABLE public.product
    ADD FOREIGN KEY (product_select_color)
    REFERENCES public.colors (colors_title)
    NOT VALID;


ALTER TABLE public."order"
    ADD FOREIGN KEY (order_customer)
    REFERENCES public.customers_users (customers_login)
    NOT VALID;


ALTER TABLE public."order"
    ADD FOREIGN KEY (order_payment_type)
    REFERENCES public.payment_methods (payment_methods__title)
    NOT VALID;


ALTER TABLE public.order_product
    ADD FOREIGN KEY (product_product_title)
    REFERENCES public.product (product_title)
    NOT VALID;


ALTER TABLE public.customers_basket
    ADD FOREIGN KEY (customers_basket_login)
    REFERENCES public.customers_users (customers_login)
    NOT VALID;


ALTER TABLE public.customers_basket_product
    ADD FOREIGN KEY (customers_basket_customers_basket_items)
    REFERENCES public.customers_basket (customers_basket_items)
    NOT VALID;


ALTER TABLE public.customers_basket_product
    ADD FOREIGN KEY (product_product_title)
    REFERENCES public.product (product_title)
    NOT VALID;

END;